:root {
    /* Catppuccin Mocha (dark) */
    --ctp-base: #1e1e2e;
    --ctp-mantle: #181825;
    --ctp-crust: #11111b;
    --ctp-surface0: #313244;
    --ctp-surface1: #45475a;
    --ctp-surface2: #585b70;
    --ctp-text: #cdd6f4;
    --ctp-subtext1: #bac2de;
    --ctp-subtext0: #a6adc8;
    --ctp-overlay2: #9399b2;
    --ctp-overlay1: #7f849c;
    --ctp-overlay0: #6c7086;
    --ctp-blue: #89b4fa;
    --ctp-lavender: #b4befe;
    --ctp-sapphire: #74c7ec;
    --ctp-sky: #89dceb;
    --ctp-teal: #94e2d5;
    --ctp-green: #a6e3a1;
    --ctp-yellow: #f9e2af;
    --ctp-peach: #fab387;
    --ctp-maroon: #eba0ac;
    --ctp-red: #f38ba8;
    --ctp-mauve: #cba6f7;
    --ctp-pink: #f5c2e7;
    --ctp-flamingo: #f2cdcd;
    --ctp-rosewater: #f5e0dc;

    --bg-main: var(--ctp-base);
    --bg-chat: var(--ctp-mantle);
    --bg-header: var(--ctp-surface0);
    --bg-btn: var(--ctp-surface1);
    --bg-btn-hover: var(--ctp-surface2);
    --bg-popup: var(--ctp-mantle);
    --bg-popup-header: var(--ctp-surface1);
    --bg-popup-header-pulse: var(--ctp-surface2);
    --text-main: var(--ctp-text);
    --text-secondary: var(--ctp-subtext1);
    --text-link: var(--ctp-blue);
    --border-main: var(--ctp-surface2);
    --shadow-main: 0 4px 24px rgba(24,24,37,0.25);
    --shadow-header: 0 2px 8px rgba(24,24,37,0.18);
    --shadow-header-pulse: 0 4px 16px rgba(137,180,250,0.25);
    --popup-radius: 16px 16px 8px 8px;
    --border-color: var(--ctp-surface2);
    --border-color-accent: var(--ctp-blue);
}
.light-mode {
    /* Catppuccin Latte (light) */
    --ctp-base: #eff1f5;
    --ctp-mantle: #e6e9ef;
    --ctp-crust: #dce0e8;
    --ctp-surface0: #ccd0da;
    --ctp-surface1: #bcc0cc;
    --ctp-surface2: #acb0be;
    --ctp-text: #4c4f69;
    --ctp-subtext1: #5c5f77;
    --ctp-subtext0: #6c6f85;
    --ctp-overlay2: #7c7f93;
    --ctp-overlay1: #8c8fa1;
    --ctp-overlay0: #9ca0b0;
    --ctp-blue: #1e66f5;
    --ctp-lavender: #7287fd;
    --ctp-sapphire: #209fb5;
    --ctp-sky: #04a5e5;
    --ctp-teal: #179299;
    --ctp-green: #40a02b;
    --ctp-yellow: #df8e1d;
    --ctp-peach: #fe640b;
    --ctp-maroon: #e64553;
    --ctp-red: #d20f39;
    --ctp-mauve: #8839ef;
    --ctp-pink: #ea76cb;
    --ctp-flamingo: #dd7878;
    --ctp-rosewater: #dc8a78;

    --bg-main: var(--ctp-base);
    --bg-chat: var(--ctp-mantle);
    --bg-header: var(--ctp-surface0);
    --bg-btn: var(--ctp-surface1);
    --bg-btn-hover: var(--ctp-surface2);
    --bg-popup: var(--ctp-mantle);
    --bg-popup-header: var(--ctp-surface1);
    --bg-popup-header-pulse: var(--ctp-surface2);
    --text-main: var(--ctp-text);
    --text-secondary: var(--ctp-subtext1);
    --text-link: var(--ctp-blue);
    --border-main: var(--ctp-surface2);
    --shadow-main: 0 4px 24px rgba(220,224,232,0.10);
    --shadow-header: 0 2px 8px rgba(220,224,232,0.08);
    --shadow-header-pulse: 0 4px 16px rgba(30,102,245,0.12);
    --popup-radius: 16px 16px 8px 8px;
    --border-color: var(--ctp-surface2);
    --border-color-accent: var(--ctp-blue);
}
body {
    background-color: var(--bg-main);
    color: var(--text-main);
    font-family: 'Quicksand', 'Inter', 'Segoe UI', 'Roboto', 'Helvetica Neue', Arial, 'Liberation Sans', sans-serif;
    font-size: 16px;
    line-height: 1.6;
    margin: 0;
}

/* Navbar */
.navbar {
    background-color: var(--ctp-crust);
    padding: 1rem 2rem;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

.navbar-container {
    display: flex;
    justify-content: space-between;
    align-items: center;
    max-width: 1200px;
    margin: 0 auto;
}

.nav-logo {
    color: var(--ctp-mauve);
    font-size: 1.5rem;
    font-weight: bold;
    text-decoration: none;
}

.nav-menu {
    display: flex;
    gap: 1.5rem;
}

.nav-item {
    color: var(--ctp-text);
    text-decoration: none;
    transition: color 0.3s ease;
}

.nav-item:hover {
    color: var(--ctp-pink);
}

a {
    color: var(--text-link);
    text-decoration: underline;
}

.chat-container,
.chat-messages,
.chat-input-area,
input,
textarea {
    background-color: var(--bg-chat);
    color: var(--text-main);
    border-color: var(--border-main);
    font-family: inherit;
}

.message.sent {
    background-color: var(--bg-btn);
    color: var(--text-main);
}

.message.received {
    background-color: var(--bg-header);
    color: var(--text-secondary);
}

button,
.send-btn {
    background-color: var(--bg-btn);
    color: var(--text-main);
    border: 1px solid var(--border-main);
    font-family: inherit;
    transition: background 0.2s;
}

button:hover,
.send-btn:hover {
    background-color: var(--bg-btn-hover);
}

::-webkit-scrollbar {
    width: 8px;
    background: var(--bg-header);
}
::-webkit-scrollbar-thumb {
    background: var(--border-main);
    border-radius: 4px;
}

/* === START: Main Content & Chat UI Styles === */

/* General Content Layout */
.main-content {
    padding: 2rem;
    max-width: 1200px;
    margin: 0 auto;
}

.quote-container {
    text-align: center;
    margin-bottom: 2rem;
    padding: 1rem;
    background-color: var(--ctp-mantle);
    border-radius: 8px;
    font-style: italic;
    color: var(--ctp-subtext1);
}

.content-grid {
    display: grid;
    grid-template-columns: 2fr 1fr;
    gap: 2rem;
    align-items: start;
}

/* Chat Area & Container */
.chat-area .messenger-container {
    position: relative;
    width: 100%;
    left: auto;
    bottom: auto;
    background-color: var(--ctp-base);
    border: 1px solid var(--ctp-surface1);
    border-radius: 8px; /* Rounded corners for the whole widget */
    box-shadow: var(--shadow-main);
    overflow: hidden;
    display: flex;
    flex-direction: column;
    transition: max-height 0.35s ease-in-out;
}


.chat-main {
    display: flex;
    flex-direction: column;
    height: 70vh;
    max-height: 700px;
    min-height: 300px;
}

/* Chat Header */
.chat-header {
    background-color: var(--ctp-surface0);
    padding: 10px 20px;
    border-bottom: 1px solid var(--ctp-surface1);
    display: flex;
    align-items: center;
    flex-shrink: 0;
}

.chat-title {
    font-weight: bold;
    font-size: 1.1rem;
    color: var(--ctp-text);
    margin-right: auto;
}

.chat-header .mode-switch-btn,
.chat-header .minimize-btn {
    background: none;
    border: none;
    color: var(--ctp-subtext1);
    font-size: 16px;
    cursor: pointer;
    padding: 5px;
    margin-left: 8px;
    transition: color 0.2s, background-color 0.2s;
    border-radius: 5px;
}

.chat-header button:hover {
    color: var(--ctp-mauve);
    background-color: var(--ctp-surface1);
}

/* Message Area */
.chat-messages {
    flex-grow: 1;
    padding: 20px;
    overflow-y: auto;
    display: flex;
    flex-direction: column;
    gap: 12px;
    transition: opacity 0.2s ease-in-out;
}

.message {
    padding: 10px 16px;
    border-radius: 18px;
    max-width: 85%;
    width: fit-content;
    line-height: 1.5;
    word-wrap: break-word;
}

.message p:first-child { margin-top: 0; }
.message p:last-child { margin-bottom: 0; }

.message.sent {
    background-color: var(--ctp-mauve);
    color: var(--ctp-crust);
    align-self: flex-end;
    border-bottom-right-radius: 6px;
}

.message.received {
    background-color: var(--ctp-surface1);
    color: var(--ctp-text);
    align-self: flex-start;
    border-bottom-left-radius: 6px;
}

/* Input Area */
.chat-input-area {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 15px 20px;
    border-top: 1px solid var(--ctp-surface1);
    background-color: var(--ctp-base);
    transition: opacity 0.2s ease-in-out;
}

.chat-input {
    flex-grow: 1;
    border: 1px solid var(--ctp-surface2);
    background-color: var(--ctp-surface0);
    color: var(--ctp-text);
    border-radius: 20px;
    padding: 10px 18px;
    font-size: 1rem;
    outline: none;
    transition: box-shadow 0.2s, border-color 0.2s;
}

.chat-input:focus {
    border-color: var(--ctp-mauve);
    box-shadow: 0 0 0 3px rgba(203, 166, 247, 0.3);
}

.chat-input-area button {
    background: none;
    border: none;
    color: var(--ctp-subtext1);
    font-size: 20px;
    cursor: pointer;
    padding: 8px;
    border-radius: 50%;
    width: 40px;
    height: 40px;
    display: grid;
    place-items: center;
    transition: color 0.2s, background-color 0.2s;
}

.chat-input-area button:hover {
    color: var(--ctp-mauve);
    background-color: var(--ctp-surface1);
}

.chat-input-area button:disabled {
    color: var(--ctp-overlay0);
    background: none;
    cursor: not-allowed;
}

/* Collapsed State */
.messenger-container.collapsed {
    max-height: 55px; /* Adjust to match header height */
}

.messenger-container.collapsed .chat-messages,
.messenger-container.collapsed .chat-input-area {
    opacity: 0;
    pointer-events: none;
}

.messenger-container.collapsed .chat-header {
    cursor: pointer;
}

/* Sidebar Area */
.sidebar-area {
    display: flex;
    flex-direction: column;
    gap: 2rem;
}

.rating-widget, .mascot-widget {
    background-color: var(--ctp-mantle);
    padding: 1.5rem;
    border-radius: 8px;
    text-align: center;
}

.rating-widget h3 {
    margin-bottom: 1rem;
    color: var(--ctp-teal);
}

.stars {
    font-size: 1.5rem;
    color: var(--ctp-yellow);
    margin-bottom: 1rem;
    cursor: pointer;
}

.stars i:hover {
    color: var(--ctp-peach);
}

.mascot-widget img {
    max-width: 100%;
    height: auto;
    border-radius: 8px;
}

/* Rating Feedback Styles */
.rating-feedback {
    margin-top: 1rem;
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
}

.rating-textarea {
    background-color: var(--ctp-surface0);
    color: var(--ctp-text);
    border: 1px solid var(--ctp-surface2);
    border-radius: 6px;
    padding: 10px;
    font-family: inherit;
    font-size: 0.95rem;
    min-height: 80px;
    resize: vertical;
    outline: none;
    transition: border-color 0.2s, box-shadow 0.2s;
}

.rating-textarea:focus {
    border-color: var(--ctp-mauve);
    box-shadow: 0 0 0 3px rgba(203, 166, 247, 0.3);
}

.rating-submit-btn {
    background-color: var(--ctp-mauve);
    color: var(--ctp-crust);
    border: none;
    border-radius: 6px;
    padding: 10px 15px;
    font-weight: bold;
    cursor: pointer;
    transition: background-color 0.2s;
}

.rating-submit-btn:hover {
    background-color: var(--ctp-pink);
}

/* Responsive Design */
@media (max-width: 768px) {
    .content-grid {
        grid-template-columns: 1fr;
    }

    .sidebar-area {
        flex-direction: row;
        justify-content: space-around;
    }

    .rating-widget, .mascot-widget {
        flex-basis: 45%;
    }
}

@media (max-width: 500px) {
    .main-content {
        padding: 1rem;
    }

    .sidebar-area {
        flex-direction: column;
    }
}

/* === END: Main Content & Chat UI Styles === */
